# A. Index


1. erd 그리기 전, 기존 존재하던 앱/서비스의 erd 선행분석한 후, 비즈니스 로직 & 시나리오 작성하기 
2. 해당 도메인에 관련 법 확인하기
3. 1:N 관계 파악 전, 무조건 1이어야만 하는 테이블 먼저 파악하기 
- 오해) 
    1. 정규화 & 반정규화 해서 테이블 수 많아지는거 문제 안됨

# B. tips 

## 1. erd 그리기 전, 기존 존재하던 앱/서비스의 erd 선행분석한 후, 비즈니스 로직 & 시나리오 작성하기 

requirements만 보고 시스템이 어떻게 돌아갈지 머릿속으로 생각하면서 erd를 그렸는데,
requirements -> 시나리오 -> erd 가 좀 더 정석적이겠네.

erd를 보고 전체 로직이 보여야 한다.

## 2. 해당 도메인에 관련 법 확인하기

만약 실종동물에 대한 웹사이트 만들거면,
우선 동물보호법 법 체계라던지 현재 관리되고 있는 실태라던지를 어느 정도 포용을 해야 사용자들 입장에서도 사용하기 편할 거에요.

기존 서비스들이 동물 보호법 체계에 맞게 모델링 되어 서비스 중인데,
새로운 앱의 prototype, format이 다르면, 기존 사용자들이 불편함을 겪을 수도 있다.

## 3. 1:N 관계 파악 전, 무조건 1이어야만 하는 테이블 먼저 파악하기 
ex. 
1. user table은 무조건 1이어야 한다. 여기에 연결된 테이블은 무조건 1:N관계로 이어진다. 
2. 상품 테이블도 무조건 1이어야 한다. 

무조건 1인 테이블을 먼저 파악하면, 1:N, 1:1, 1:0 관계 파악할 때 수월하다. 


## 4. pk, fk 설정할 땐, 실제 엑셀에 테이블에 값 넣어가면서 생각해보기 
예를들어 상품주문 테이블에서 
pk(user_id, product_id) 이렇게 묶으면, 
평생 유저는 빵빠레를 딱 한번밖에 주문할 수 없음. 

이럴 땐 pk(상품주문_id) fk(user_id, product_id)로 해줘야, 
특정 유저가 중복상품을 살 수 있음. 
왜냐면 pk로 묶어지면 무조건 유니크 해야하니까. 


## 5. 필드 추가할 때, 비즈니스 로직 생각하면서 추가하기 

ex) 상품주문 테이블에서, 포인트 처리 어떻게 하지?

1. 적립포인트 컬럼 필요 
2. 근데 사용포인트도 필요하겠네? 각 주문_item마다?
3. 근데 상품살 때, 포인트로 산건지 현금으로 산건지 구분해야 하니까, 판매가격을 price, 포인트사용 유무 YES OR NO 필요하겠네?

ex2) 반품처리되는 경우는?

1. 상품 구입했다는 기록 남겨야 하니까 soft-delete해야함 -> cancel_yn 해서 반품처리 한거는 'Y'로 마크하기 
2. 반품처리시 만약에 포인트로 구매했었다면, order_item_table과(포인트 사용량) order_table(총 포인트 사용량), user_table(총 포인트 보유량) 세 테이블을 업데이트 시켜야 함 







# C. 오해 
## 1. 반정규화 해서 테이블 수 많아지는거 문제 안됨


